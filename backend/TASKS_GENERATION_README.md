# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è tasks - –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è

## üìã –©–æ —Ü–µ?

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏—Ö –æ–≥–æ–ª–æ—à–µ–Ω—å –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Å–∞–π—Ç—É.

### ‚úÖ –ö–ª—é—á–æ–≤—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏:

1. **–ó–∞—Ö–∏—Å—Ç —Ä–µ–∞–ª—å–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** - –†–µ–∞–ª—å–Ω—ñ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è
2. **–°–µ–∑–æ–Ω–Ω—ñ—Å—Ç—å** - Tasks –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –ø–æ—Ç–æ—á–Ω–æ–º—É —Å–µ–∑–æ–Ω—É (–∑–∞—Ä–∞–∑ –∑–∏–º–∞)
3. **–†–µ–∞–ª—ñ—Å—Ç–∏—á–Ω—ñ—Å—Ç—å** - –¶—ñ–Ω–∏, —Ä–∞–π–æ–Ω–∏, –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω—ñ
4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è** - –í—Å–µ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ Laravel Scheduler

---

## üîß –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?

### 1. –ü–æ–ª–µ `is_generated`

–£ —Ç–∞–±–ª–∏—Ü—ñ `tasks` –¥–æ–¥–∞–Ω–æ –ø–æ–ª–µ `is_generated`:
- `true` = –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–µ —Å–∏—Å—Ç–µ–º–æ—é (–º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏)
- `false` = —Å—Ç–≤–æ—Ä–µ–Ω–µ —Ä–µ–∞–ª—å–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º (–ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è)

### 2. –î–≤—ñ –∫–æ–º–∞–Ω–¥–∏

#### `php artisan tasks:generate-daily`
**–©–æ —Ä–æ–±–∏—Ç—å:**
- –ì–µ–Ω–µ—Ä—É—î 20 —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏—Ö tasks —â–æ–¥–Ω—è
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∑–∏–º–æ–≤—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó (—Å–∞–Ω—Ç–µ—Ö–Ω—ñ–∫–∞, –µ–ª–µ–∫—Ç—Ä–∏–∫–∞, –æ–ø–∞–ª–µ–Ω–Ω—è)
- –†–æ–∑–ø–æ–¥—ñ–ª—è—î –ø–æ –≤—Å—ñ—Ö —Ä–∞–π–æ–Ω–∞—Ö –ü–∞—Ä–∏–∂–∞
- Realistic budgets: 30-800‚Ç¨
- –ß–∞—Å –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó: 8:00-20:00

**–ó–∞–ø—É—Å–∫:**
```bash
# –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ 20 tasks (default)
php artisan tasks:generate-daily

# –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ 50 tasks
php artisan tasks:generate-daily --count=50
```

#### `php artisan tasks:cleanup-generated`
**–©–æ —Ä–æ–±–∏—Ç—å:**
- –í–∏–¥–∞–ª—è—î –¢–Ü–õ–¨–ö–ò –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ tasks —Å—Ç–∞—Ä—à—ñ 3 –¥–Ω—ñ–≤
- –†–µ–∞–ª—å–Ω—ñ tasks –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ó–ê–•–ò–©–ï–ù–Ü

**–ó–∞–ø—É—Å–∫:**
```bash
# –í–∏–¥–∞–ª–∏—Ç–∏ tasks —Å—Ç–∞—Ä—à—ñ 3 –¥–Ω—ñ–≤ (default)
php artisan tasks:cleanup-generated

# –í–∏–¥–∞–ª–∏—Ç–∏ tasks —Å—Ç–∞—Ä—à—ñ 7 –¥–Ω—ñ–≤
php artisan tasks:cleanup-generated --days=7
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π scheduler

–£ `app/Console/Kernel.php`:
- **06:00** - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è 20 –Ω–æ–≤–∏—Ö tasks
- **02:00** - –æ—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö tasks (>3 –¥–Ω—ñ–≤)

---

## üöÄ Deployment

### –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ migration
```bash
cd /var/www/prochepro.fr/backend
php artisan migrate
```

–¶–µ –¥–æ–¥–∞—Å—Ç—å –ø–æ–ª–µ `is_generated` —Ç–∞ –ø–æ–∑–Ω–∞—á–∏—Ç—å –≤—Å—ñ —ñ—Å–Ω—É—é—á—ñ tasks —è–∫ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ.

### –ö—Ä–æ–∫ 2: –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø–µ—Ä—à—ñ tasks
```bash
# –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ 30 tasks –¥–ª—è —Å—Ç–∞—Ä—Ç—É
php artisan tasks:generate-daily --count=30
```

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è —â–æ cron –ø—Ä–∞—Ü—é—î
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø—Ä–∞—Ü—é—î Laravel Scheduler
crontab -l

# –ú–∞—î –±—É—Ç–∏:
# * * * * * cd /var/www/prochepro.fr/backend && php artisan schedule:run >> /dev/null 2>&1
```

–Ø–∫—â–æ –Ω–µ–º–∞—î - –¥–æ–¥–∞—Ç–∏:
```bash
crontab -e
# –î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫:
* * * * * cd /var/www/prochepro.fr/backend && php artisan schedule:run >> /dev/null 2>&1
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
```bash
php artisan tasks:generate-daily --count=0
```

–ü–æ–∫–∞–∂–µ:
- –í—Å—å–æ–≥–æ published tasks
- –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö tasks
- –†–µ–∞–ª—å–Ω–∏—Ö tasks (–∑–∞—Ö–∏—â–µ–Ω—ñ)

---

## üéØ –ó–∏–º–æ–≤—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó (–°—ñ—á–µ–Ω—å 2026)

### –í–∏—Å–æ–∫–∏–π –ø–æ–ø–∏—Ç (40%):
- ‚ùÑÔ∏è –°–∞–Ω—Ç–µ—Ö–Ω—ñ–∫–∞: —Ç–µ—á—ñ —Ä–∞–¥—ñ–∞—Ç–æ—Ä—ñ–≤, –ø—Ä–æ–±–ª–µ–º–∏ –∑ –æ–ø–∞–ª–µ–Ω–Ω—è–º, –±–æ–π–ª–µ—Ä–∏
- üîß –ï–ª–µ–∫—Ç—Ä–∏–∫–∞: —Å–≤—ñ—Ç–ª–æ, —Ä–æ–∑–µ—Ç–∫–∏, –æ–±—ñ–≥—Ä—ñ–≤–∞—á—ñ

### –°–µ—Ä–µ–¥–Ω—ñ–π –ø–æ–ø–∏—Ç (30%):
- üè† –î—Ä—ñ–±–Ω–∏–π —Ä–µ–º–æ–Ω—Ç
- üßπ –ü—Ä–∏–±–∏—Ä–∞–Ω–Ω—è –ø—ñ—Å–ª—è —Å–≤—è—Ç
- üì¶ –í–∞–Ω—Ç–∞–∂–Ω–∏–∫–∏

### –ù–∏–∑—å–∫–∏–π –ø–æ–ø–∏—Ç (30%):
- üé® –ö–æ—Å–º–µ—Ç–∏—á–Ω–∏–π —Ä–µ–º–æ–Ω—Ç
- üíª IT/–∫–æ–º–ø'—é—Ç–µ—Ä–∏
- üõ†Ô∏è –ú–æ–Ω—Ç–∞–∂ –º–µ–±–ª—ñ–≤

---

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û

### ‚úÖ –©–æ –∑–∞—Ö–∏—â–µ–Ω–æ:
- **–†–µ–∞–ª—å–Ω—ñ tasks –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** - –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è
- **Offers –Ω–∞ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ tasks** - —è–∫—â–æ —Ö—Ç–æ—Å—å –Ω–∞–¥—ñ—Å–ª–∞–≤ offer, task –ù–ï –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è
- **Completed tasks** - –≤—Å—ñ –∑–∞–≤–µ—Ä—à–µ–Ω—ñ tasks –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è

### ‚ùå –©–æ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è:
- –¢—ñ–ª—å–∫–∏ `is_generated = true`
- –¢—ñ–ª—å–∫–∏ —Å—Ç–∞—Ä—ñ—à—ñ 3 –¥–Ω—ñ–≤
- –¢—ñ–ª—å–∫–∏ –±–µ–∑ offers

---

## üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –≤–µ—Å–Ω—É/–ª—ñ—Ç–æ

–ö–æ–ª–∏ –∑–º—ñ–Ω–∏—Ç—å—Å—è —Å–µ–∑–æ–Ω, –æ–Ω–æ–≤–∏—Ç–∏ —Ñ–∞–π–ª:
`app/Console/Commands/GenerateDailyTasks.php`

–ó–∞–º—ñ–Ω–∏—Ç–∏ `$winterTasks` –Ω–∞ —Å–µ–∑–æ–Ω–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó.

---

## üõ†Ô∏è Troubleshooting

### –ó–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ tasks?
```bash
# –ó–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
php artisan tasks:cleanup-generated --days=2
```

### –ó–∞–Ω–∞–¥—Ç–æ –º–∞–ª–æ tasks?
```bash
# –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –±—ñ–ª—å—à–µ
php artisan tasks:generate-daily --count=40
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ scheduler:
```bash
php artisan schedule:list
```

---

## üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

–°—Ç–≤–æ—Ä–∏—Ç–∏ bash script –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É:
```bash
#!/bin/bash
cd /var/www/prochepro.fr/backend
echo "=== Tasks Statistics ==="
php artisan tinker --execute="echo 'Total published: ' . \App\Models\Task::where('status', 'published')->count() . PHP_EOL; echo 'Generated: ' . \App\Models\Task::where('is_generated', true)->count() . PHP_EOL; echo 'Real users: ' . \App\Models\Task::where('is_generated', false)->count() . PHP_EOL;"
```

–ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫ `/root/check-tasks.sh` —ñ –∑–∞–ø—É—Å–∫–∞—Ç–∏ —â–æ–¥–Ω—è.
